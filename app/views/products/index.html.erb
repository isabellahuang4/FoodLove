<h1>Products</h1>
<p><%= link_to "Home", root_url %></p>
<table>
<thead>
  <tr>
    <th>Featured</th>
    <th>Category</th>
    <th>Item</th>
    <th>Unit</th>
    <th>Price</th>
    <th>Quantity</th>
    <th>Description</th>
    <th>Notes</th>
    <th>Available</th>
    <th>Update</th>
    <th>Delete</th>
  </tr>
</thead>
<tbody>
<%= form_for :products, :url => farm_update_all_path(@farm), html: {method: 'put'} do |farm_form| %>
  <% @products.sort_by{|p| [p.available ? 0:1,
                                 p.category.downcase,
                                 p.name.downcase,
                                 p.price]}.each do |pro| %>
    <%= farm_form.fields_for "product[]", pro do |form| %>
      <tr>
        <td><%= form.check_box :feature %></td>
        <td><%= form.text_field :category %></td>
        <td><%= form.text_field :name %></td>
        <td><%= form.text_field :unit %></td>
        <td>$<%= form.text_field :price, data:{role: 'money', a_sep:',', a_dec: '.'} %></td>
        <td><%= form.number_field :quantity %></td>
        <td><%= form.text_area :description %></td>
        <td><%= form.text_area :notes %></td>
        <td><%= form.check_box :available %></td>
        <td><%= form.submit %></td>
        <td><%= button_to "Delete", farm_product_path(@farm, pro), method: :delete, data: {confirm: "Are you sure?"} %></td>
      </tr>
    <% end %>
 <% end %>
</tbody>
</table>
<br>
<%= farm_form.submit farm_update_all_path(@farm) %>
<% end %>
